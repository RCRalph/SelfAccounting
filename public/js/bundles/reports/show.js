!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=243)}({0:function(t,e,r){"use strict";function n(t,e,r,n,a,s,i,o){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=r,u._compiled=!0),n&&(u.functional=!0),s&&(u._scopeId="data-v-"+s),i?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},u._ssrRegister=c):a&&(c=o?function(){a.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:u}}r.d(e,"a",(function(){return n}))},2:function(t,e,r){"use strict";var n=r(0),a=Object(n.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-flex justify-content-center my-2"},[e("div",{staticClass:"spinner-grow",staticStyle:{width:"3rem",height:"3rem"},attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[this._v("Loading...")])])])}],!1,null,null,null);e.a=a.exports},243:function(t,e,r){t.exports=r(244)},244:function(t,e,r){Vue.component("show-report-component",r(278).default);new Vue({el:"#app"})},278:function(t,e,r){"use strict";r.r(e);var n=r(7),a=r(5),s=r(2);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u={props:["id","edit"],components:{TableHeader:n.a,EmptyPlaceholder:a.a,Loading:s.a},data:function(){return{data:{},currencies:[],means:{},categories:{},rows:[],sum:null,sumCurrency:1,ready:!1,headerCells:[{text:"Date"},{text:"Title"},{text:"Amount"},{text:"Price"},{text:"Value"},{text:"Category"},{text:"Mean"}]}},computed:{tableRowsSpanned:function(){var t=[],e={},r={date:1,title:1,amount:1,price:1,value:1,category_id:1,mean_id:1,currency_id:1};return this.rows.forEach((function(n,a){if(n.value=(Math.round(n.amount*n.price*100)/100).toLocaleString("en").split(",").join(" "),n.amount=Number(n.amount).toLocaleString("en").split(",").join(" "),n.price=Number(n.price).toLocaleString("en").split(",").join(" "),!t.length)return t.push(o(o({},n),{},{span:o({},r)})),void(e=o(o({},n),{},{span:o({},r),indeces:{date:0,title:0,amount:0,price:0,value:0,category_id:0,mean_id:0,currency_id:0}}));if(n.date!=e.date)t.push(o(o({},n),{},{span:o({},r)})),e=o(o({},n),{},{span:o({},r),indeces:{date:a,title:a,amount:a,price:a,value:a,category_id:a,mean_id:a,currency_id:a}});else{var s={span:{}};for(var i in n)n[i]==e[i]?t[e.indeces[i]].span[i]++:(s[i]=n[i],s.span[i]=1,e[i]=n[i],e.indeces[i]=a);t.push(s)}})),t}},methods:{getCategoryName:function(t,e){if(!e)return"N/A";var r=this.categories[t].find((function(t){return t.id==e}));return r?r.name:"N/A"},getMeanName:function(t,e){if(!e)return"N/A";var r=this.means[t].find((function(t){return t.id==e}));return r?r.name:"N/A"},exportToTXT:function(){var t=this,e=["Date\tTitle\tAmount\tPrice\tValue\tCategory\tMean"];this.rows.forEach((function(r,n){e.push("".concat(r.date,"\t").concat(r.title,"\t").concat(r.amount,"\t").concat(r.price+" "+t.currencies[t.rows[n].currency_id-1].ISO,"\t").concat(r.value+" "+t.currencies[t.rows[n].currency_id-1].ISO,"\t").concat(t.getCategoryName(t.rows[n].currency_id,r.category_id),"\t").concat(t.getMeanName(t.rows[n].currency_id,r.mean_id)))}));var r=e.join("\n"),n=document.createElement("a");n.style.display="none;",n.href="data:text/plain;charset:utf-8,".concat(r),n.download="".concat(this.data.title,".txt"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},mounted:function(){var t=this;axios.get("/webapi/bundles/reports/".concat(this.id),{}).then((function(e){t.currencies=e.data.currencies,t.means=e.data.means,t.categories=e.data.categories,t.data=e.data.reportData,t.rows=e.data.rows,t.sum=e.data.sum,null!==e.data.sum&&(t.sumCurrency=Object.keys(e.data.sum),t.sumCurrency=t.sumCurrency.length?t.sumCurrency[0]:0),t.ready=!0}))},updated:function(){this.$nextTick((function(){document.getElementById("table-multi-hover")&&tableHoveringScript()}))}},l=r(0),d=Object(l.a)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header-flex"},[r("div",{staticClass:"card-header-text"},[r("i",{staticClass:"fas fa-newspaper"}),t._v("\n            "+t._s(t.ready?t.data.title:"Report #"+t.id)+"\n        ")]),t._v(" "),t.ready&&"1"==t.edit?r("div",{staticClass:"d-flex"},[r("a",{staticClass:"big-button-primary",attrs:{role:"button",href:"/bundles/reports/"+t.id+"/edit"}},[t._v("\n                Edit report\n            ")])]):t._e()]),t._v(" "),r("div",{staticClass:"card-body"},[t.ready?r("div",[t.rows.length?r("div",[null!==t.sum?r("div",{staticClass:"row"},[r("div",{staticClass:"mx-auto mb-3 col-md-8 col-lg-6 offset-lg-3"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-header-flex"},[t._m(0),t._v(" "),Object.keys(t.sum).length?r("div",{staticClass:"d-flex"},[r("div",{staticClass:"h4 my-auto mr-3"},[t._v("Currency:")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.sumCurrency,expression:"sumCurrency"}],staticClass:"form-control",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.sumCurrency=e.target.multiple?r:r[0]}}},t._l(Object.keys(t.sum),(function(e,n){return r("option",{key:n,domProps:{value:e}},[t._v("\n                                            "+t._s(t.currencies[e-1].ISO)+"\n                                        ")])})),0)]):t._e()]),t._v(" "),r("div",{staticClass:"card-body text-center h2 my-auto"},[t._v("\n                                "+t._s(t.sum[t.sumCurrency].toLocaleString("en").split(",").join(" "))+"\n                                "+t._s(t.currencies[t.sumCurrency-1].ISO)+"\n                            ")])])])]):t._e(),t._v(" "),r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col-lg-4 col-md-6 col-12 my-2 my-md-0 offset-lg-4 offset-md-3"},[r("button",{staticClass:"big-button-primary btn-lg",on:{click:t.exportToTXT}},[r("i",{staticClass:"fas fa-file-alt"}),t._v("\n                            Export to .txt file\n                        ")])])]),t._v(" "),r("div",{staticClass:"table-responsive w-100"},[r("table",{staticClass:"responsive-table-bordered table-themed",attrs:{id:"table-multi-hover"}},[r("TableHeader",{attrs:{cells:t.headerCells}}),t._v(" "),r("tbody",t._l(t.tableRowsSpanned,(function(e,n){return r("tr",{key:n,attrs:{i:n}},[e.date?r("th",{attrs:{scope:"row",rep:"date",rowspan:e.span.date}},[t._v(t._s(e.date)+"\n                                ")]):t._e(),t._v(" "),e.title?r("td",{attrs:{rep:"title",rowspan:e.span.title}},[t._v(t._s(e.title))]):t._e(),t._v(" "),e.amount?r("td",{attrs:{rep:"amount",rowspan:e.span.amount}},[t._v(t._s(e.amount))]):t._e(),t._v(" "),e.price?r("td",{attrs:{rep:"price",rowspan:e.span.price}},[t._v(t._s(e.price+" "+t.currencies[t.rows[n].currency_id-1].ISO))]):t._e(),t._v(" "),e.value?r("td",{attrs:{rep:"value",rowspan:e.span.value}},[t._v(t._s(e.value+" "+t.currencies[t.rows[n].currency_id-1].ISO))]):t._e(),t._v(" "),void 0!==e.category_id?r("td",{attrs:{rep:"category",rowspan:e.span.category_id}},[t._v(t._s(t.getCategoryName(t.rows[n].currency_id,e.category_id)))]):t._e(),t._v(" "),void 0!==e.mean_id?r("td",{attrs:{rep:"mean",rowspan:e.span.mean_id}},[t._v(t._s(t.getMeanName(t.rows[n].currency_id,e.mean_id)))]):t._e()])})),0)],1)])]):r("EmptyPlaceholder")],1):r("Loading")],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header-text"},[e("i",{staticClass:"fas fa-calculator"}),this._v("\n                                    Sum\n                                ")])}],!1,null,null,null);e.default=d.exports},5:function(t,e,r){"use strict";var n=r(0),a=Object(n.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",{staticClass:"text-center"},[this._v("Nothing to see here, for now...")])])}],!1,null,null,null);e.a=a.exports},7:function(t,e,r){"use strict";var n={props:{cells:Array}},a=r(0),s=Object(a.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",t._l(t.cells,(function(e,n){return r("th",{key:n,class:e.text&&"h5 font-weight-bold",attrs:{scope:e.text&&"col","data-toggle":e.tooltip&&"tooltip","data-placement":e.tooltip&&"bottom",title:e.tooltip}},[t._v("\n            "+t._s(e.text)+"\n        ")])})),0)])}),[],!1,null,null,null);e.a=s.exports}});
//# sourceMappingURL=show.js.map