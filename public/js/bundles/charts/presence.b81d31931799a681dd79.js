(()=>{var e={3726:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});function s(e,t,n,s,r,a,o,c){var i,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),s&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),o?(i=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},l._ssrRegister=i):r&&(i=c?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),i)if(l.functional){l._injectStyles=i;var u=l.render;l.render=function(e,t){return i.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,i):[i]}return{exports:e,options:l}}const r=s({},(function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex justify-content-center my-2"},[n("div",{staticClass:"spinner-grow",staticStyle:{width:"3rem",height:"3rem"},attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[e._v("Loading...")])])])}],!1,null,null,null).exports;const a=s({props:{cells:Array}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",e._l(e.cells,(function(t,s){return n("th",{key:s,class:t.text&&"h5 font-weight-bold",attrs:{scope:t.text&&"col","data-bs-toggle":t.tooltip&&"tooltip","data-bs-placement":t.tooltip&&"bottom",title:t.tooltip}},[e._v("\n            "+e._s(t.text)+"\n        ")])})),0)])}),[],!1,null,null,null).exports;const o=s({},(function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"text-center"},[e._v("Nothing to see here, for now...")])])}],!1,null,null,null).exports;const c=s({props:{value:{required:!0,type:Boolean},disabled:{required:!1,type:Boolean,default:!1},name:{required:!1,type:String,default:""},choice:{type:Boolean,required:!1,default:!1}},methods:{emitEvents:function(e){this.$emit("input",e.currentTarget.checked),this.$emit("htmlElement",e.currentTarget)}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.choice?"slider-choice":"slider-checkbox"},[n("label",{staticClass:"switch m-0"},[n("input",{attrs:{type:"checkbox",disabled:e.disabled,name:e.name},domProps:{checked:e.value},on:{change:e.emitEvents}}),e._v(" "),n("span",{staticClass:"slider round"})])])}),[],!1,null,null,null).exports;const i=s({props:{disableAll:{type:Boolean,required:!1,default:!1},disableSave:{type:Boolean,required:!1,default:!1},disableReset:{type:Boolean,required:!1,default:!1},spinner:{type:Boolean,required:!1,default:!1}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-6 my-2 my-sm-0"},[n("button",{staticClass:"big-button-success",attrs:{type:"button",disabled:e.disableAll||e.disableSave||e.spinner},on:{click:function(t){return e.$emit("save")}}},[e.spinner?n("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):n("div",[e._v("\n                Save changes\n            ")])])]),e._v(" "),n("div",{staticClass:"col-sm-6 my-2 my-sm-0"},[n("button",{staticClass:"big-button-danger",attrs:{type:"button",disabled:e.disableAll||e.disableReset||e.spinner},on:{click:function(t){return e.$emit("reset")}}},[e._v("\n            Reset changes\n        ")])])])}),[],!1,null,null,null).exports;const l=s({props:{content:{required:!0,type:Object},currencies:{required:!0,type:Array},lastcurrency:{required:!1,type:Number,default:1}},components:{TableHeader:a,EmptyPlaceholder:o,Slider:c,SaveResetChanges:i},data:function(){return{header:[{text:"Name",tooltip:"The name of your category"},{text:"Income",tooltip:"Use in income"},{text:"Outcome",tooltip:"Use in outcome"},{text:"Charts",tooltip:"Category present on charts"}],categories:{},categoriesCopy:{},currentCurrency:1,submitted:!1}},methods:{save:function(){var e=this;this.submitted=!0;var t=[];for(var n in this.categories)this.categories[n].forEach((function(e){e.show_on_charts&&t.push(e.id)}));axios.patch("/webapi/bundles/charts/presence/categories",{data:t}).then((function(t){e.categoriesCopy=_.cloneDeep(e.categories),e.submitted=!1})).catch((function(t){console.log(t),e.submitted=!1}))},reset:function(){this.categories=_.cloneDeep(this.categoriesCopy)},refreshTooltip:function(){this.$nextTick((function(){updateTooltips()}))}},beforeMount:function(){this.currentCurrency=this.lastcurrency,this.categories=_.cloneDeep(this.content),this.categoriesCopy=_.cloneDeep(this.content)},mounted:function(){this.refreshTooltip()},updated:function(){this.refreshTooltip()}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-header-flex"},[e._m(0),e._v(" "),n("div",{staticClass:"d-flex"},[n("div",{staticClass:"h4 my-auto me-3"},[e._v("Currency:")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.currentCurrency,expression:"currentCurrency"}],staticClass:"form-control",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.currentCurrency=t.target.multiple?n:n[0]}}},e._l(e.currencies,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v("\n                    "+e._s(t.ISO)+"\n                ")])})),0)])]),e._v(" "),n("div",{staticClass:"card-body"},[e.content[e.currentCurrency].length?n("div",{staticClass:"table-responsive-lg"},[n("table",{staticClass:"table-themed responsive-table-hover"},[n("TableHeader",{attrs:{cells:e.header}}),e._v(" "),n("tbody",e._l(e.categories[e.currentCurrency],(function(t){return n("tr",{key:t.id},[n("th",{attrs:{scope:"row"}},[e._v("\n                            "+e._s(t.name)+"\n                        ")]),e._v(" "),n("td",[n("i",{class:["fas","h3","my-auto",t.income_category?"fa-check-square":"fa-times-circle",t.income_category?"text-success":"text-danger"]})]),e._v(" "),n("td",[n("i",{class:["fas","h3","my-auto",t.outcome_category?"fa-check-square":"fa-times-circle",t.outcome_category?"text-success":"text-danger"]})]),e._v(" "),n("td",[n("Slider",{model:{value:t.show_on_charts,callback:function(n){e.$set(t,"show_on_charts",n)},expression:"category.show_on_charts"}})],1)])})),0)],1)]):n("EmptyPlaceholder"),e._v(" "),n("hr",{staticClass:"hr"}),e._v(" "),n("SaveResetChanges",{attrs:{disableAll:e.submitted,spinner:e.submitted},on:{save:e.save,reset:e.reset}})],1)])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card-header-text"},[n("i",{staticClass:"fab fa-buffer"}),e._v("\n            Categories\n        ")])}],!1,null,null,null).exports;var u=s({props:{content:{required:!0,type:Object},currencies:{required:!0,type:Array},lastcurrency:{required:!1,type:Number,default:1}},components:{TableHeader:a,EmptyPlaceholder:o,Slider:c,SaveResetChanges:i},data:function(){return{header:[{text:"Name",tooltip:"The name of your mean of payment"},{text:"Income",tooltip:"Use in income"},{text:"Outcome",tooltip:"Use in outcome"},{text:"Charts",tooltip:"Mean of payment present on charts"}],means:{},meansCopy:{},currentCurrency:1,submitted:!1}},methods:{save:function(){var e=this;this.submitted=!0;var t=[];for(var n in this.means)this.means[n].forEach((function(e){e.show_on_charts&&t.push(e.id)}));axios.patch("/webapi/bundles/charts/presence/means-of-payment",{data:t}).then((function(t){e.meansCopy=_.cloneDeep(e.means),e.submitted=!1})).catch((function(t){console.log(t),e.submitted=!1}))},reset:function(){this.means=_.cloneDeep(this.meansCopy)},refreshTooltip:function(){this.$nextTick((function(){updateTooltips()}))}},beforeMount:function(){this.currentCurrency=this.lastcurrency,this.means=_.cloneDeep(this.content),this.meansCopy=_.cloneDeep(this.content)},mounted:function(){this.refreshTooltip()},updated:function(){this.refreshTooltip()}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-header-flex"},[e._m(0),e._v(" "),n("div",{staticClass:"d-flex"},[n("div",{staticClass:"h4 my-auto me-3"},[e._v("Currency:")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.currentCurrency,expression:"currentCurrency"}],staticClass:"form-control",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.currentCurrency=t.target.multiple?n:n[0]}}},e._l(e.currencies,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v("\n                    "+e._s(t.ISO)+"\n                ")])})),0)])]),e._v(" "),n("div",{staticClass:"card-body"},[e.content[e.currentCurrency].length?n("div",{staticClass:"table-responsive-lg"},[n("table",{staticClass:"table-themed responsive-table-hover"},[n("TableHeader",{attrs:{cells:e.header}}),e._v(" "),n("tbody",e._l(e.means[e.currentCurrency],(function(t){return n("tr",{key:t.id},[n("th",{attrs:{scope:"row"}},[e._v("\n                            "+e._s(t.name)+"\n                        ")]),e._v(" "),n("td",[n("i",{class:["fas","h3","my-auto",t.income_mean?"fa-check-square":"fa-times-circle",t.income_mean?"text-success":"text-danger"]})]),e._v(" "),n("td",[n("i",{class:["fas","h3","my-auto",t.outcome_mean?"fa-check-square":"fa-times-circle",t.outcome_mean?"text-success":"text-danger"]})]),e._v(" "),n("td",[n("Slider",{model:{value:t.show_on_charts,callback:function(n){e.$set(t,"show_on_charts",n)},expression:"mean.show_on_charts"}})],1)])})),0)],1)]):n("EmptyPlaceholder"),e._v(" "),n("hr",{staticClass:"hr"}),e._v(" "),n("SaveResetChanges",{attrs:{disableAll:e.submitted,spinner:e.submitted},on:{save:e.save,reset:e.reset}})],1)])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card-header-text"},[n("i",{staticClass:"fab fa-buffer"}),e._v("\n            Means of payment\n        ")])}],!1,null,null,null);const d=s({components:{Loading:r,CategoriesComponent:l,MeansOfPaymentComponent:u.exports},data:function(){return{ready:!1,currencies:[],categories:{},means:{},currency:1}},mounted:function(){var e=this;axios.get("/webapi/bundles/charts/presence",{}).then((function(t){var n=t.data;e.currencies=n.currencies,e.categories=n.categories,e.means=n.means,e.currency=n.lastCurrency,e.ready=!0}))}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card"},[e._m(0),e._v(" "),n("div",{staticClass:"card-body"},[e.ready?n("div",[n("CategoriesComponent",{attrs:{content:e.categories,currencies:e.currencies,lastcurrency:e.currency}}),e._v(" "),n("MeansOfPaymentComponent",{staticClass:"mt-3",attrs:{content:e.means,currencies:e.currencies,lastcurrency:e.currency}})],1):n("Loading")],1)])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card-header-flex"},[n("div",{staticClass:"card-header-text"},[n("i",{staticClass:"fas fa-chart-bar"}),e._v("\n            Chart presence\n        ")])])}],!1,null,null,null).exports}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{Vue.component("presence-component",n(3726).Z);new Vue({el:"#app"})})()})();
//# sourceMappingURL=presence.js.map