!function(e){var t={};function a(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(s,n,function(t){return e[t]}.bind(null,n));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=213)}({1:function(e,t,a){"use strict";function s(e,t,a,s,n,i,r,o){var l,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=a,u._compiled=!0),s&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},u._ssrRegister=l):n&&(l=o?function(){n.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var d=u.render;u.render=function(e,t){return l.call(t),d(e,t)}}else{var c=u.beforeCreate;u.beforeCreate=c?[].concat(c,l):[l]}return{exports:e,options:u}}a.d(t,"a",(function(){return s}))},2:function(e,t,a){"use strict";var s=a(1),n=Object(s.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-flex justify-content-center my-2"},[t("div",{staticClass:"spinner-grow",staticStyle:{width:"3rem",height:"3rem"},attrs:{role:"status"}},[t("span",{staticClass:"sr-only"},[this._v("Loading...")])])])}],!1,null,null,null);t.a=n.exports},213:function(e,t,a){e.exports=a(214)},214:function(e,t,a){Vue.component("profile-component",a(241).default);new Vue({el:"#app"})},241:function(e,t,a){"use strict";a.r(t);var s={props:{darkmode:Boolean,userData:Object},data:function(){return{userTypes:["Basic","Premium","Admin"]}},computed:{createDate:function(){var e=new Date(this.userData.created_at);return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1<10?"0":"").concat(e.getMonth()+1,"-").concat(e.getDate()<10?"0":"").concat(e.getDate())},premiumObject:function(){if(this.userData.admin)return{type:2};if(1==this.userData.premium&&null===this.userData.premium_expiration)return{expiration:!1,type:1};if(this.userData.premium){return{expiration:Math.ceil((new Date(this.userData.premium_expiration).getTime()-(new Date).getTime())/864e5)+1,type:1}}return{type:0}}}},n=a(1),i=Object(n.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"profile-wrapper"},[a("div",{staticClass:"profile-picture"},[a("img",{attrs:{src:e.userData.profile_picture,alt:e.userData.username}})]),e._v(" "),a("p",{class:["username",e.premiumObject.type&&"premium"]},[e._v("\n        "+e._s(e.userData.username)+"\n    ")]),e._v(" "),a("hr"),e._v(" "),a("div",[a("p",{class:["account-type",e.premiumObject.type&&"premium"]},[e._v("\n            Account type: "+e._s(e.userTypes[e.premiumObject.type])+"\n        ")]),e._v(" "),e.premiumObject.type&&e.premiumObject.expiration?a("p",{staticClass:"account-type premium"},[e._v("\n            Premium left:"),a("br"),e._v("\n            "+e._s(e.premiumObject.expiration)+" "+e._s(1==e.premiumObject.expiration?"day":"days")+"\n        ")]):e._e()]),e._v(" "),a("hr"),e._v(" "),a("p",{staticClass:"sa-since"},[e._v("\n        With us since:"),a("br"),e._v("\n        "+e._s(e.createDate)+"\n    ")])])}),[],!1,null,null,null).exports,r=a(5),o=a(4),l={props:{userDataCopy:Object},components:{SaveResetChanges:r.a,InputGroup:o.a},data:function(){return{correctFile:!0,data:{},submit:!1}},methods:{resetData:function(){document.getElementById("picture").value="",this.validFile=!0,this.data=this.userDataCopy},checkFile:function(){var e=document.getElementById("picture").files[0].type;this.correctFile=e.includes("image")},submitForm:function(){document.getElementById("data-form").submit(),this.submit=!0}},beforeMount:function(){this.data=_.cloneDeep(this.userDataCopy)},computed:{CSRF_TOKEN:function(){return document.head.querySelectorAll("meta[name=csrf-token]")[0].attributes.content.value},validEmail:function(){return/^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(this.data.email)&&this.data.email.length<=64},validUsername:function(){return this.data.username.length<=32&&this.data.username.length>0},disableSubmit:function(){return!(this.validUsername&&this.validEmail&&this.correctFile)}}},u=Object(n.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("form",{attrs:{id:"data-form",action:"/profile/update",method:"POST",enctype:"multipart/form-data"}},[a("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:e.CSRF_TOKEN}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"_method",value:"PATCH"}}),e._v(" "),a("InputGroup",{attrs:{type:"text",name:"username",maxlength:"32",invalid:!e.validUsername,placeholder:"Your username here..."},model:{value:e.data.username,callback:function(t){e.$set(e.data,"username",t)},expression:"data.username"}}),e._v(" "),a("InputGroup",{attrs:{type:"email",name:"email",maxlength:"64",invalid:!e.validEmail,placeholder:"Your email here..."},model:{value:e.data.email,callback:function(t){e.$set(e.data,"email",t)},expression:"data.email"}}),e._v(" "),a("div",{staticClass:"form-group row"},[e._m(0),e._v(" "),a("div",{staticClass:"col-md-7 my-auto"},[a("input",{class:["form-control","form-control-file",!e.correctFile&&"is-invalid"],attrs:{type:"file",id:"picture",name:"picture"},on:{change:e.checkFile}})])]),e._v(" "),a("SaveResetChanges",{attrs:{disableAll:e.submit,disableSave:e.disableSubmit,spinner:e.submit},on:{save:e.submitForm,reset:e.resetData}})],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-md-4 d-flex justify-content-md-end justify-content-start align-items-center"},[t("div",{staticClass:"h5 font-weight-bold m-md-0"},[this._v("Profile picture")])])}],!1,null,null,null).exports,d={components:{InputGroup:o.a},data:function(){return{passwords:["",""],submit:!1}},methods:{submitForm:function(){document.getElementById("password-form").submit(),this.submit=!0}},computed:{CSRF_TOKEN:function(){return document.head.querySelectorAll("meta[name=csrf-token]")[0].attributes.content.value},validPasswords:function(){return this.passwords[0].length>=8&&this.passwords[1].length>=8&&this.passwords[0]===this.passwords[1]||""==this.passwords[0]&&""==this.passwords[1]},canSubmit:function(){return this.passwords[0].length>0&&this.passwords[1].length>0}}},c={components:{ProfileShowcase:i,ProfileInfoChange:u,ProfilePasswordChange:Object(n.a)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("form",{attrs:{id:"password-form",action:"/profile/password",method:"POST",enctype:"multipart/form-data"}},[a("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:e.CSRF_TOKEN}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"_method",value:"PATCH"}}),e._v(" "),a("InputGroup",{attrs:{type:"password",name:"password",invalid:!e.validPasswords,placeholder:"Your password here...",autocomplete:"off"},model:{value:e.passwords[0],callback:function(t){e.$set(e.passwords,0,t)},expression:"passwords[0]"}}),e._v(" "),a("InputGroup",{attrs:{type:"password",name:"password_confirmation",invalid:!e.validPasswords,placeholder:"Confirm your password here...",autocomplete:"off"},model:{value:e.passwords[1],callback:function(t){e.$set(e.passwords,1,t)},expression:"passwords[1]"}}),e._v(" "),a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-xl-7 offset-xl-4"},[a("button",{staticClass:"big-button-success",attrs:{type:"button",disabled:!e.canSubmit||!e.validPasswords},on:{click:e.submitForm}},[e.submit?a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):a("div",[e._v("\n                        Save changes\n                    ")])])])])],1)])}),[],!1,null,null,null).exports,Loading:a(2).a},data:function(){return{darkmode:!1,ready:!1,userData:{}}},beforeMount:function(){this.darkmode=document.getElementById("darkmode-status").innerHTML.includes("1")},mounted:function(){var e=this;axios.get("/webapi/profile",{}).then((function(t){e.userData=t.data.user,e.ready=!0}))},beforeUpdate:function(){this.darkmode=document.getElementById("darkmode-status").innerHTML.includes("1")}},p=Object(n.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card"},[e._m(0),e._v(" "),a("div",{staticClass:"card-body"},[e.ready?a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-5"},[a("ProfileShowcase",{attrs:{darkmode:e.darkmode,userData:e.userData}})],1),e._v(" "),a("div",{staticClass:"col-lg-7 mt-sm-3"},[a("ProfileInfoChange",{attrs:{userDataCopy:e.userData}}),e._v(" "),a("hr",{staticClass:"hr my-3"}),e._v(" "),a("ProfilePasswordChange"),e._v(" "),1!=e.userData.id?a("div",[a("hr",{staticClass:"hr my-3"}),e._v(" "),e._m(1)]):e._e()],1)])]):a("Loading")],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header-flex"},[t("div",{staticClass:"card-header-text"},[t("i",{staticClass:"fas fa-user"}),this._v("\n                Profile\n            ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-xl-6 offset-xl-3"},[t("a",{staticClass:"big-button-danger",attrs:{href:"/profile/delete",role:"button"}},[t("i",{staticClass:"fas fa-trash"}),this._v("\n                                        Delete my profile\n                                    ")])])])}],!1,null,null,null);t.default=p.exports},4:function(e,t,a){"use strict";var s={props:{name:{required:!0,type:String},type:{required:!1,type:String,default:"text"},value:{required:!0},invalid:{required:!1,type:Boolean,default:!1},min:{required:!1},max:{required:!1},minlength:{required:!1},maxlength:{required:!1},prepend:{required:!1,type:String},append:{required:!1,type:String},autocomplete:{required:!1,type:String,default:"off"},placeholder:{required:!1,type:String},datalistName:{required:!1,type:String},datalist:{required:!1,type:Array},step:{required:!1,type:String,default:"1"},selectOptions:{required:!1,type:Array},optionValueKey:{required:!1,type:String},optionTextKey:{required:!1,type:String},disabled:{required:!1,type:Boolean,default:!1}},filters:{capitalize:function(e){return(e.charAt(0).toUpperCase()+e.slice(1)).replace("_"," ")}},watch:{value:function(){this.$emit("input",this.value)}}},n=a(1),i=Object(n.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-md-4 d-flex justify-content-md-end justify-content-start align-items-center"},[a("div",{staticClass:"h5 font-weight-bold m-md-0"},[e._v(e._s(e._f("capitalize")("password_confirmation"!=e.name?e.name:"confirm")))])]),e._v(" "),"select"==e.type?a("div",{staticClass:"col-md-7"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"form-control",attrs:{disabled:e.disabled},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.value=t.target.multiple?a:a[0]}}},e._l(e.selectOptions,(function(t,s){return a("option",{key:s,domProps:{value:t[e.optionValueKey],selected:e.value==t[e.optionValueKey]||1==e.selectOptions.length}},[e._v("\n                    "+e._s(t[e.optionTextKey])+"\n                ")])})),0)]):a("div",{class:["col-md-7",(e.prepend||e.append)&&"input-group"]},[e.prepend?a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[e._v(e._s(e.prepend))])]):e._e(),e._v(" "),"checkbox"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:["form-control",e.invalid&&"is-invalid"],attrs:{name:e.name,min:e.min,max:e.max,minlength:e.minlength,maxlength:e.maxlength,autocomplete:e.autocomplete,placeholder:e.placeholder,list:e.datalistName,step:e.step,disabled:e.disabled,type:"checkbox"},domProps:{checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{change:function(t){var a=e.value,s=t.target,n=!!s.checked;if(Array.isArray(a)){var i=e._i(a,null);s.checked?i<0&&(e.value=a.concat([null])):i>-1&&(e.value=a.slice(0,i).concat(a.slice(i+1)))}else e.value=n}}}):"radio"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:["form-control",e.invalid&&"is-invalid"],attrs:{name:e.name,min:e.min,max:e.max,minlength:e.minlength,maxlength:e.maxlength,autocomplete:e.autocomplete,placeholder:e.placeholder,list:e.datalistName,step:e.step,disabled:e.disabled,type:"radio"},domProps:{checked:e._q(e.value,null)},on:{change:function(t){e.value=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:["form-control",e.invalid&&"is-invalid"],attrs:{name:e.name,min:e.min,max:e.max,minlength:e.minlength,maxlength:e.maxlength,autocomplete:e.autocomplete,placeholder:e.placeholder,list:e.datalistName,step:e.step,disabled:e.disabled,type:e.type},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),e._v(" "),e.datalist?a("datalist",{attrs:{id:e.datalistName}},e._l(e.datalist,(function(t,s){return a("option",{key:s},[e._v(e._s(t))])})),0):e._e(),e._v(" "),e.append?a("div",{staticClass:"input-group-append"},[a("div",{staticClass:"input-group-text"},[e._v(e._s(e.append))])]):e._e(),e._v(" "),e.invalid?a("span",{staticClass:"invalid-feedback",attrs:{role:"alert"}},[a("strong",[e._v(e._s(e._f("capitalize")(e.name))+" is invalid")])]):e._e()])])}),[],!1,null,null,null);t.a=i.exports},5:function(e,t,a){"use strict";var s={props:{disableAll:{type:Boolean,required:!1,default:!1},disableSave:{type:Boolean,required:!1,default:!1},disableReset:{type:Boolean,required:!1,default:!1},spinner:{type:Boolean,required:!1,default:!1}},methods:{save:function(){this.$emit("save")},reset:function(){this.$emit("reset")}}},n=a(1),i=Object(n.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6 my-2 my-sm-0"},[a("button",{staticClass:"big-button-success",attrs:{type:"button",disabled:e.disableAll||e.disableSave||e.spinner},on:{click:e.save}},[e.spinner?a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):a("div",[e._v("\n                Save changes\n            ")])])]),e._v(" "),a("div",{staticClass:"col-sm-6 my-2 my-sm-0"},[a("button",{staticClass:"big-button-danger",attrs:{type:"button",disabled:e.disableAll||e.disableReset||e.spinner},on:{click:e.reset}},[e._v("\n            Reset changes\n        ")])])])}),[],!1,null,null,null);t.a=i.exports}});
//# sourceMappingURL=profile.js.map