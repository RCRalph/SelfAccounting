!function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=221)}({0:function(e,t,a){"use strict";function n(e,t,a,n,i,s,r,l){var o,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=a,u._compiled=!0),n&&(u.functional=!0),s&&(u._scopeId="data-v-"+s),r?(o=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},u._ssrRegister=o):i&&(o=l?function(){i.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:i),o)if(u.functional){u._injectStyles=o;var c=u.render;u.render=function(e,t){return o.call(t),c(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,o):[o]}return{exports:e,options:u}}a.d(t,"a",(function(){return n}))},2:function(e,t,a){"use strict";var n=a(0),i=Object(n.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-flex justify-content-center my-2"},[t("div",{staticClass:"spinner-grow",staticStyle:{width:"3rem",height:"3rem"},attrs:{role:"status"}},[t("span",{staticClass:"sr-only"},[this._v("Loading...")])])])}],!1,null,null,null);t.a=i.exports},221:function(e,t,a){e.exports=a(222)},222:function(e,t,a){Vue.component("profile-component",a(260).default);new Vue({el:"#app"})},260:function(e,t,a){"use strict";a.r(t);var n={props:{userData:Object},data:function(){return{userTypes:["Basic","Premium","Admin"]}},computed:{createDate:function(){var e=new Date(this.userData.created_at);return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1<10?"0":"").concat(e.getMonth()+1,"-").concat(e.getDate()<10?"0":"").concat(e.getDate())},premiumObject:function(){if(this.userData.admin)return{type:2};if(1==this.userData.premium&&null===this.userData.premium_expiration)return{expiration:!1,type:1};if(this.userData.premium){return{expiration:Math.ceil((new Date(this.userData.premium_expiration).getTime()-(new Date).getTime())/864e5)+1,type:1}}return{type:0}}}},i=a(0),s=Object(i.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"profile-wrapper"},[a("div",{staticClass:"profile-picture"},[a("img",{attrs:{src:e.userData.profile_picture,alt:e.userData.username}})]),e._v(" "),a("p",{class:["username",e.premiumObject.type&&"premium"]},[e._v("\n        "+e._s(e.userData.username)+"\n    ")]),e._v(" "),a("hr"),e._v(" "),a("div",[a("p",{class:["account-type",e.premiumObject.type&&"premium"]},[e._v("\n            Account type: "+e._s(e.userTypes[e.premiumObject.type])+"\n        ")]),e._v(" "),e.premiumObject.type&&e.premiumObject.expiration?a("p",{staticClass:"account-type premium"},[e._v("\n            Premium left:"),a("br"),e._v("\n            "+e._s(e.premiumObject.expiration)+" "+e._s(1==e.premiumObject.expiration?"day":"days")+"\n        ")]):e._e()]),e._v(" "),a("hr"),e._v(" "),a("p",{staticClass:"sa-since"},[e._v("\n        With us since:"),a("br"),e._v("\n        "+e._s(e.createDate)+"\n    ")])])}),[],!1,null,null,null).exports,r=a(6),l=a(4),o={props:{userDataCopy:Object},components:{SaveResetChanges:r.a,InputGroup:l.a},data:function(){return{correctFile:!0,data:{},submit:!1}},methods:{resetData:function(){document.getElementById("picture").value="",this.validFile=!0,this.data=this.userDataCopy},checkFile:function(){var e=document.getElementById("picture").files[0].type;this.correctFile=e.includes("image")},submitForm:function(){document.getElementById("data-form").submit(),this.submit=!0}},beforeMount:function(){this.data=_.cloneDeep(this.userDataCopy)},computed:{CSRF_TOKEN:function(){return document.head.querySelectorAll("meta[name=csrf-token]")[0].attributes.content.value},validEmail:function(){return/^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(this.data.email)&&this.data.email.length<=64},validUsername:function(){return this.data.username.length<=32&&this.data.username.length>0},disableSubmit:function(){return!(this.validUsername&&this.validEmail&&this.correctFile)}}},u=Object(i.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("form",{attrs:{id:"data-form",action:"/profile/update",method:"POST",enctype:"multipart/form-data"}},[a("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:e.CSRF_TOKEN}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"_method",value:"PATCH"}}),e._v(" "),a("InputGroup",{attrs:{type:"text",name:"username",maxlength:"32",invalid:!e.validUsername,placeholder:"Your username here..."},model:{value:e.data.username,callback:function(t){e.$set(e.data,"username",t)},expression:"data.username"}}),e._v(" "),a("InputGroup",{attrs:{type:"email",name:"email",maxlength:"64",invalid:!e.validEmail,placeholder:"Your email here..."},model:{value:e.data.email,callback:function(t){e.$set(e.data,"email",t)},expression:"data.email"}}),e._v(" "),a("div",{staticClass:"form-group row"},[e._m(0),e._v(" "),a("div",{staticClass:"col-md-7 my-auto"},[a("input",{class:["form-control","form-control-file",!e.correctFile&&"is-invalid"],attrs:{type:"file",id:"picture",name:"picture"},on:{change:e.checkFile}})])]),e._v(" "),a("SaveResetChanges",{attrs:{disableAll:e.submit,disableSave:e.disableSubmit,spinner:e.submit},on:{save:e.submitForm,reset:e.resetData}})],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-md-4 d-flex justify-content-md-end justify-content-start align-items-center"},[t("div",{staticClass:"h5 font-weight-bold m-md-0"},[this._v("Profile picture")])])}],!1,null,null,null).exports,c={components:{InputGroup:l.a},data:function(){return{passwords:["",""],submit:!1}},methods:{submitForm:function(){document.getElementById("password-form").submit(),this.submit=!0}},computed:{CSRF_TOKEN:function(){return document.head.querySelectorAll("meta[name=csrf-token]")[0].attributes.content.value},validPasswords:function(){return this.passwords[0].length>=8&&this.passwords[1].length>=8&&this.passwords[0]===this.passwords[1]||""==this.passwords[0]&&""==this.passwords[1]},canSubmit:function(){return this.passwords[0].length>0&&this.passwords[1].length>0}}},d={components:{ProfileShowcase:s,ProfileInfoChange:u,ProfilePasswordChange:Object(i.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("form",{attrs:{id:"password-form",action:"/profile/password",method:"POST",enctype:"multipart/form-data"}},[a("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:e.CSRF_TOKEN}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"_method",value:"PATCH"}}),e._v(" "),a("InputGroup",{attrs:{type:"password",name:"password",invalid:!e.validPasswords,placeholder:"Your password here...",autocomplete:"off"},model:{value:e.passwords[0],callback:function(t){e.$set(e.passwords,0,t)},expression:"passwords[0]"}}),e._v(" "),a("InputGroup",{attrs:{type:"password",name:"password_confirmation",invalid:!e.validPasswords,placeholder:"Confirm your password here...",autocomplete:"off"},model:{value:e.passwords[1],callback:function(t){e.$set(e.passwords,1,t)},expression:"passwords[1]"}}),e._v(" "),a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-xl-7 offset-xl-4"},[a("button",{staticClass:"big-button-success",attrs:{type:"button",disabled:!e.canSubmit||!e.validPasswords},on:{click:e.submitForm}},[e.submit?a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):a("div",[e._v("\n                        Save changes\n                    ")])])])])],1)])}),[],!1,null,null,null).exports,Loading:a(2).a},data:function(){return{ready:!1,userData:{}}},mounted:function(){var e=this;axios.get("/webapi/profile",{}).then((function(t){e.userData=t.data.user,e.ready=!0}))}},p=Object(i.a)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card"},[e._m(0),e._v(" "),a("div",{staticClass:"card-body"},[e.ready?a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-5"},[a("ProfileShowcase",{attrs:{userData:e.userData}})],1),e._v(" "),a("div",{staticClass:"col-lg-7 mt-sm-3"},[a("ProfileInfoChange",{attrs:{userDataCopy:e.userData}}),e._v(" "),a("hr",{staticClass:"hr my-3"}),e._v(" "),a("ProfilePasswordChange"),e._v(" "),1!=e.userData.id?a("div",[a("hr",{staticClass:"hr my-3"}),e._v(" "),e._m(1)]):e._e()],1)])]):a("Loading")],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header-flex"},[t("div",{staticClass:"card-header-text"},[t("i",{staticClass:"fas fa-user"}),this._v("\n                Profile\n            ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-xl-6 offset-xl-3"},[t("a",{staticClass:"big-button-danger",attrs:{href:"/profile/delete",role:"button"}},[t("i",{staticClass:"fas fa-trash"}),this._v("\n                                        Delete my profile\n                                    ")])])])}],!1,null,null,null);t.default=p.exports},3:function(e,t,a){"use strict";var n={props:{value:{required:!0,type:Boolean},disabled:{required:!1,type:Boolean,default:!1},name:{required:!1,type:String,default:""},choice:{type:Boolean,required:!1,default:!1}},methods:{emitEvents:function(e){this.$emit("input",e.currentTarget.checked),this.$emit("htmlElement",e.currentTarget)}}},i=a(0),s=Object(i.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:this.choice?"slider-choice":"slider-checkbox"},[t("label",{staticClass:"switch m-0"},[t("input",{attrs:{type:"checkbox",disabled:this.disabled,name:this.name},domProps:{checked:this.value},on:{change:this.emitEvents}}),this._v(" "),t("span",{staticClass:"slider round"})])])}),[],!1,null,null,null);t.a=s.exports},4:function(e,t,a){"use strict";var n=a(3),i={props:{name:{required:!0,type:String},type:{required:!1,type:String,default:"text"},value:{required:!0},invalid:{required:!1,type:Boolean,default:!1},min:{required:!1},max:{required:!1},minlength:{required:!1},maxlength:{required:!1},prepend:{required:!1,type:String},append:{required:!1,type:String},autocomplete:{required:!1,type:String,default:"off"},placeholder:{required:!1,type:String},datalistName:{required:!1,type:String},datalist:{required:!1,type:Array},step:{required:!1,type:String,default:"1"},selectOptions:{required:!1,type:Array},optionValueKey:{required:!1,type:String},optionTextKey:{required:!1,type:String},optionKeyAndValue:{required:!1,type:Boolean,default:!1},capitalizeOptions:{required:!1,type:Boolean,default:!1},nullValue:{required:!1,type:String,default:""},disabled:{required:!1,type:Boolean,default:!1}},components:{SliderCheckbox:n.a},methods:{capitalize:function(e){return(e.charAt(0).toUpperCase()+e.slice(1)).replace("_"," ")}},watch:{value:function(){this.$emit("input",this.value)}}},s=a(0),r=Object(s.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-md-4 d-flex justify-content-md-end justify-content-start align-items-center"},[a("div",{staticClass:"h5 font-weight-bold m-md-0"},[e._v(e._s(e.capitalize("password_confirmation"!=e.name?e.name:"confirm")))])]),e._v(" "),"select"==e.type?a("div",{staticClass:"col-md-7"},[e.optionKeyAndValue?a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:["form-control",e.invalid&&"is-invalid"],attrs:{disabled:e.disabled},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.value=t.target.multiple?a:a[0]}}},[e.nullValue?a("option",{domProps:{value:null}},[e._v(e._s(e.nullValue))]):e._e(),e._v(" "),e._l(e.selectOptions,(function(t,n){return a("option",{key:n,domProps:{value:t,selected:e.value==t||1==e.selectOptions.length}},[e._v("\n                    "+e._s(e.capitalizeOptions?e.capitalize(t):t)+"\n                ")])}))],2):a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:["form-control",e.invalid&&"is-invalid"],attrs:{disabled:e.disabled},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.value=t.target.multiple?a:a[0]}}},[e.nullValue?a("option",{domProps:{value:null}},[e._v(e._s(e.nullValue))]):e._e(),e._v(" "),e._l(e.selectOptions,(function(t,n){return a("option",{key:n,domProps:{value:t[e.optionValueKey],selected:e.value==t[e.optionValueKey]||1==e.selectOptions.length}},[e._v("\n                    "+e._s(t[e.optionTextKey])+"\n                ")])}))],2),e._v(" "),e.invalid?a("span",{staticClass:"invalid-feedback",attrs:{role:"alert"}},[a("strong",[e._v(e._s(e.capitalize(e.name))+" is invalid")])]):e._e()]):a("div",{class:["col-md-7",(e.prepend||e.append)&&"input-group"]},[e.prepend?a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[e._v(e._s(e.prepend))])]):e._e(),e._v(" "),"checkbox"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:["form-control",e.invalid&&"is-invalid"],attrs:{name:e.name,min:e.min,max:e.max,minlength:e.minlength,maxlength:e.maxlength,autocomplete:e.autocomplete,placeholder:e.placeholder,list:e.datalistName,step:e.step,disabled:e.disabled,type:"checkbox"},domProps:{checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{change:function(t){var a=e.value,n=t.target,i=!!n.checked;if(Array.isArray(a)){var s=e._i(a,null);n.checked?s<0&&(e.value=a.concat([null])):s>-1&&(e.value=a.slice(0,s).concat(a.slice(s+1)))}else e.value=i}}}):"radio"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:["form-control",e.invalid&&"is-invalid"],attrs:{name:e.name,min:e.min,max:e.max,minlength:e.minlength,maxlength:e.maxlength,autocomplete:e.autocomplete,placeholder:e.placeholder,list:e.datalistName,step:e.step,disabled:e.disabled,type:"radio"},domProps:{checked:e._q(e.value,null)},on:{change:function(t){e.value=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:["form-control",e.invalid&&"is-invalid"],attrs:{name:e.name,min:e.min,max:e.max,minlength:e.minlength,maxlength:e.maxlength,autocomplete:e.autocomplete,placeholder:e.placeholder,list:e.datalistName,step:e.step,disabled:e.disabled,type:e.type},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),e._v(" "),e.datalist?a("datalist",{attrs:{id:e.datalistName}},e._l(e.datalist,(function(t,n){return a("option",{key:n},[e._v(e._s(t))])})),0):e._e(),e._v(" "),e.append?a("div",{staticClass:"input-group-append"},[a("div",{staticClass:"input-group-text"},[e._v(e._s(e.append))])]):e._e(),e._v(" "),e.invalid?a("span",{staticClass:"invalid-feedback",attrs:{role:"alert"}},[a("strong",[e._v(e._s(e.capitalize(e.name))+" is invalid")])]):e._e()])])}),[],!1,null,null,null);t.a=r.exports},6:function(e,t,a){"use strict";var n={props:{disableAll:{type:Boolean,required:!1,default:!1},disableSave:{type:Boolean,required:!1,default:!1},disableReset:{type:Boolean,required:!1,default:!1},spinner:{type:Boolean,required:!1,default:!1}}},i=a(0),s=Object(i.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6 my-2 my-sm-0"},[a("button",{staticClass:"big-button-success",attrs:{type:"button",disabled:e.disableAll||e.disableSave||e.spinner},on:{click:function(t){return e.$emit("save")}}},[e.spinner?a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):a("div",[e._v("\n                Save changes\n            ")])])]),e._v(" "),a("div",{staticClass:"col-sm-6 my-2 my-sm-0"},[a("button",{staticClass:"big-button-danger",attrs:{type:"button",disabled:e.disableAll||e.disableReset||e.spinner},on:{click:function(t){return e.$emit("reset")}}},[e._v("\n            Reset changes\n        ")])])])}),[],!1,null,null,null);t.a=s.exports}});
//# sourceMappingURL=profile.js.map