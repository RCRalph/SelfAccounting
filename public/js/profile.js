!function(e){var t={};function s(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s(s.s=71)}({0:function(e,t,s){"use strict";function a(e,t,s,a,r,i,n,o){var l,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=s,u._compiled=!0),a&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),n?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},u._ssrRegister=l):r&&(l=o?function(){r.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(e,t){return l.call(t),c(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:u}}s.d(t,"a",(function(){return a}))},1:function(e,t,s){"use strict";var a=s(0),r=Object(a.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-flex justify-content-center my-2"},[t("div",{staticClass:"spinner-grow",staticStyle:{width:"3rem",height:"3rem"},attrs:{role:"status"}},[t("span",{staticClass:"sr-only"},[this._v("Loading...")])])])}],!1,null,null,null);t.a=r.exports},4:function(e,t,s){"use strict";var a={props:{disableAll:{type:Boolean,required:!1,default:!1},disableSave:{type:Boolean,required:!1,default:!1},disableReset:{type:Boolean,required:!1,default:!1},spinner:{type:Boolean,required:!1,default:!1}},methods:{save:function(){this.$emit("save")},reset:function(){this.$emit("reset")}}},r=s(0),i=Object(r.a)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-6 my-2 my-sm-0"},[s("button",{staticClass:"big-button-success",attrs:{type:"button",disabled:e.disableAll||e.disableSave||e.spinner},on:{click:e.save}},[e.spinner?s("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):s("div",[e._v("\n                Save changes\n            ")])])]),e._v(" "),s("div",{staticClass:"col-sm-6 my-2 my-sm-0"},[s("button",{staticClass:"big-button-danger",attrs:{type:"button",disabled:e.disableAll||e.disableReset||e.spinner},on:{click:e.reset}},[e._v("\n            Reset changes\n        ")])])])}),[],!1,null,null,null);t.a=i.exports},71:function(e,t,s){e.exports=s(72)},72:function(e,t,s){Vue.component("profile-component",s(90).default);new Vue({el:"#app"})},90:function(e,t,s){"use strict";s.r(t);var a={props:{darkmode:Boolean,userData:Object},data:function(){return{userTypes:["Basic","Premium","Admin"]}},computed:{createDate:function(){var e=new Date(this.userData.created_at);return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1<10?"0":"").concat(e.getMonth()+1,"-").concat(e.getDate()<10?"0":"").concat(e.getDate())},premiumObject:function(){if(this.userData.admin)return{type:2};if(1==this.userData.premium&&null===this.userData.premium_expiration)return{expiration:!1,type:1};if(this.userData.premium){return{expiration:Math.ceil((new Date(this.userData.premium_expiration).getTime()-(new Date).getTime())/864e5)+1,type:1}}return{type:0}}}},r=s(0),i=Object(r.a)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:e.darkmode?"profile-wrapper-dark":"profile-wrapper-light"},[s("div",{staticClass:"profile-picture"},[s("img",{attrs:{src:e.userData.profile_picture,alt:e.userData.username}})]),e._v(" "),s("p",{class:["username",e.premiumObject.type&&"premium"]},[e._v("\n        "+e._s(e.userData.username)+"\n    ")]),e._v(" "),s("hr"),e._v(" "),s("div",[s("p",{class:["account-type",e.premiumObject.type&&"premium"]},[e._v("\n            Account type: "+e._s(e.userTypes[e.premiumObject.type])+"\n        ")]),e._v(" "),e.premiumObject.type&&e.premiumObject.expiration?s("p",{staticClass:"account-type premium"},[e._v("\n            Premium left:"),s("br"),e._v("\n            "+e._s(e.premiumObject.expiration)+" "+e._s(1==e.premiumObject.expiration?"day":"days")+"\n        ")]):e._e()]),e._v(" "),s("hr"),e._v(" "),s("p",{staticClass:"sa-since"},[e._v("\n        With us since:"),s("br"),e._v("\n        "+e._s(e.createDate)+"\n    ")])])}),[],!1,null,null,null).exports,n=s(4),o={props:{userDataCopy:Object},components:{SaveResetChanges:n.a},data:function(){return{correctFile:!0,userData:{},submit:!1}},methods:{resetData:function(){document.getElementById("picture").value="",this.validFile=!0,this.userData=this.userDataCopy},checkFile:function(){var e=document.getElementById("picture").files[0].type;this.correctFile=e.includes("image")},submitForm:function(){document.getElementById("data-form").submit(),this.submit=!0}},beforeMount:function(){this.userData=_.cloneDeep(this.userDataCopy)},computed:{CSRF_TOKEN:function(){return document.head.querySelectorAll("meta[name=csrf-token]")[0].attributes.content.value},validEmail:function(){return/^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(this.userData.email)&&this.userData.email.length<=64},validUsername:function(){return this.userData.username.length<=32&&this.userData.username.length>0},disableSubmit:function(){return!(this.validUsername&&this.validEmail&&this.correctFile)}}},l={data:function(){return{passwords:["",""],submit:!1}},methods:{submitForm:function(){document.getElementById("password-form").submit(),this.submit=!0}},computed:{CSRF_TOKEN:function(){return document.head.querySelectorAll("meta[name=csrf-token]")[0].attributes.content.value},validPasswords:function(){return this.passwords[0].length>=8&&this.passwords[1].length>=8&&this.passwords[0]===this.passwords[1]||""==this.passwords[0]&&""==this.passwords[1]},canSubmit:function(){return this.passwords[0].length>0&&this.passwords[1].length>0}}},u={components:{ProfileShowcase:i,ProfileInfoChange:Object(r.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("form",{attrs:{id:"data-form",action:"/profile/update",method:"POST",enctype:"multipart/form-data"}},[s("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:e.CSRF_TOKEN}}),e._v(" "),s("input",{attrs:{type:"hidden",name:"_method",value:"PATCH"}}),e._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-xl-3 offset-xl-1 col-form-label text-xl-right"},[e._v("Username")]),e._v(" "),s("div",{staticClass:"col-xl-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.username,expression:"userData.username"}],class:["form-control",!e.validUsername&&"is-invalid"],attrs:{type:"text",id:"username",maxlength:"32",name:"username",required:""},domProps:{value:e.userData.username},on:{input:function(t){t.target.composing||e.$set(e.userData,"username",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-xl-3 offset-xl-1 col-form-label text-xl-right"},[e._v("Email")]),e._v(" "),s("div",{staticClass:"col-xl-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.email,expression:"userData.email"}],class:["form-control",!e.validEmail&&"is-invalid"],attrs:{type:"text",id:"email",maxlength:"64",name:"email",required:""},domProps:{value:e.userData.email},on:{input:function(t){t.target.composing||e.$set(e.userData,"email",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-xl-3 offset-xl-1 col-form-label text-xl-right"},[e._v("Profile picture")]),e._v(" "),s("div",{staticClass:"col-xl-7 my-auto"},[s("input",{class:["form-control","form-control-file",!e.correctFile&&"is-invalid"],attrs:{type:"file",id:"picture",name:"picture"},on:{change:e.checkFile}})])]),e._v(" "),s("SaveResetChanges",{attrs:{disableAll:e.submit,disableSave:e.disableSubmit,spinner:e.submit},on:{save:e.submitForm,reset:e.resetData}})],1)])}),[],!1,null,null,null).exports,ProfilePasswordChange:Object(r.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("form",{attrs:{id:"password-form",action:"/profile/password",method:"POST",enctype:"multipart/form-data"}},[s("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:e.CSRF_TOKEN}}),e._v(" "),s("input",{attrs:{type:"hidden",name:"_method",value:"PATCH"}}),e._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-xl-4 col-form-label text-xl-right"},[e._v("New password")]),e._v(" "),s("div",{staticClass:"col-xl-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.passwords[0],expression:"passwords[0]"}],class:["form-control",!e.validPasswords&&"is-invalid"],attrs:{type:"password",name:"password",autocomplete:"off"},domProps:{value:e.passwords[0]},on:{input:function(t){t.target.composing||e.$set(e.passwords,0,t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-xl-4 col-form-label text-xl-right"},[e._v("Confirm password")]),e._v(" "),s("div",{staticClass:"col-xl-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.passwords[1],expression:"passwords[1]"}],class:["form-control",!e.validPasswords&&"is-invalid"],attrs:{type:"password",name:"password_confirmation",autocomplete:"off"},domProps:{value:e.passwords[1]},on:{input:function(t){t.target.composing||e.$set(e.passwords,1,t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-xl-7 offset-xl-4"},[s("button",{staticClass:"big-button-success",attrs:{type:"button",disabled:!e.canSubmit||!e.validPasswords},on:{click:e.submitForm}},[e.submit?s("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):s("div",[e._v("\n                        Save changes\n                    ")])])])])])])}),[],!1,null,null,null).exports,Loading:s(1).a},data:function(){return{darkmode:!1,ready:!1,userData:{}}},beforeMount:function(){this.darkmode=document.getElementById("darkmode-status").innerHTML.includes("1")},mounted:function(){var e=this;axios.get("/webapi/profile",{}).then((function(t){e.userData=t.data.user,e.ready=!0}))},beforeUpdate:function(){this.darkmode=document.getElementById("darkmode-status").innerHTML.includes("1")}},c=Object(r.a)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:e.darkmode?"dark-card":"card"},[e._m(0),e._v(" "),s("div",{staticClass:"card-body"},[e.ready?s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-6 col-xl-5"},[s("ProfileShowcase",{attrs:{darkmode:e.darkmode,userData:e.userData}})],1),e._v(" "),s("div",{staticClass:"col-lg-6 col-xl-7 mt-sm-3"},[s("ProfileInfoChange",{attrs:{userDataCopy:e.userData}}),e._v(" "),s("hr",{class:[e.darkmode?"hr-darkmode":"hr-lightmode","my-3"]}),e._v(" "),s("ProfilePasswordChange"),e._v(" "),1!=e.userData.id?s("div",[s("hr",{class:[e.darkmode?"hr-darkmode":"hr-lightmode","my-3"]}),e._v(" "),e._m(1)]):e._e()],1)])]):s("Loading")],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header-flex"},[t("div",{staticClass:"card-header-text"},[t("i",{staticClass:"fas fa-user"}),this._v("\n                Profile\n            ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-xl-6 offset-xl-3"},[t("a",{staticClass:"big-button-danger",attrs:{href:"/profile/delete",role:"button"}},[t("i",{staticClass:"fas fa-trash"}),this._v("\n                                        Delete my profile\n                                    ")])])])}],!1,null,null,null);t.default=c.exports}});
//# sourceMappingURL=profile.js.map