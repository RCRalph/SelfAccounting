!function(t){var e={};function i(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=49)}({0:function(t,e,i){"use strict";function a(t,e,i,a,s,r,n,o){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),a&&(u.functional=!0),r&&(u._scopeId="data-v-"+r),n?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},u._ssrRegister=l):s&&(l=o?function(){s.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:u}}i.d(e,"a",(function(){return a}))},49:function(t,e,i){t.exports=i(50)},50:function(t,e,i){Vue.component("income-outcome-edit-component",i(57).default);new Vue({el:"#app"})},57:function(t,e,i){"use strict";i.r(e);var a={props:{type:String,ioid:String},data:function(){return{darkmode:!1,ready:!1,attributes:{},attributesCopy:{},currencies:[],categories:{},means:{},titles:[],deleteButton:"Delete",saveButton:"Save changes",buttonsDisabled:!1}},computed:{invalidDate:function(){var t=this;if(!this.attributes.mean_id||"null"==this.attributes.mean_id||!this.means[this.attributes.currency_id])return!this.attributes.date;var e=new Date(this.attributes.date).getTime(),i=this.means[this.attributes.currency_id].filter((function(e){return e.id==t.attributes.mean_id}))[0].first_entry_date;return this.attributes.date&&new Date(i).getTime()>e},invalidTitle:function(){return 0==this.attributes.title.length||this.attributes.title.length>32},invalidAmount:function(){return parseFloat(this.attributes.amount)!=this.attributes.amount},invalidPrice:function(){return parseFloat(this.attributes.price)!=this.attributes.price},minDate:function(){var t=this;return!(!this.attributes.mean_id||"null"==this.attributes.mean_id)&&this.means[this.attributes.currency_id].filter((function(e){return e.id==t.attributes.mean_id}))[0].first_entry_date},invalidData:function(){return this.invalidDate||this.invalidTitle||this.invalidAmount||this.invalidPrice}},methods:{reset:function(){this.attributes=_.cloneDeep(this.attributesCopy)},saveChanges:function(){var t=this;this.saveButton='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>',this.buttonsDisabled=!0,axios.patch("/webapi/".concat(this.type,"/edit"),this.attributes).then((function(e){t.attributes=e.data.data,t.attributes.amount=Number(t.attributes.amount),t.attributes.price=Number(t.attributes.price),t.attributesCopy=_.cloneDeep(e.data.data),t.attributesCopy.amount=Number(t.attributesCopy.amount),t.attributesCopy.price=Number(t.attributesCopy.price),t.saveButton="Save changes",t.buttonsDisabled=!1})).catch((function(){t.saveButton="Save changes",t.buttonsDisabled=!1}))},destroy:function(){var t=this;this.deleteButton='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>',this.buttonsDisabled=!0,axios.delete("/webapi/".concat(this.type,"/delete/").concat(this.ioid)).then((function(e){"success"==e.data.status?window.location.href="/"+t.type:(t.deleteButton="Delete",t.buttonsDisabled=!1)})).catch((function(){t.deleteButton="Delete",t.buttonsDisabled=!1}))},currencyChange:function(){this.attributes.mean_id=null,this.attributes.category_id=null}},beforeMount:function(){this.darkmode=document.getElementById("sun-moon").innerHTML.includes('<i class="fas fa-sun"></i>')},mounted:function(){var t=this;axios.get("/webapi/".concat(this.type,"/").concat(this.ioid)).then((function(e){t.attributes=e.data[t.type],t.attributes.amount=Number(t.attributes.amount),t.attributes.price=Number(t.attributes.price),t.attributesCopy=_.cloneDeep(e.data[t.type]),t.attributesCopy.amount=Number(t.attributesCopy.amount),t.attributesCopy.price=Number(t.attributesCopy.price),t.currencies=e.data.currencies,t.categories=e.data.categories,t.means=e.data.means,t.titles=e.data.titles,t.ready=!0}))},beforeUpdate:function(){this.darkmode=document.getElementById("sun-moon").innerHTML.includes('<i class="fas fa-sun"></i>')},updated:function(){this.$nextTick((function(){$('[data-toggle="tooltip"]').tooltip()}))}},s=i(0),r=Object(s.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.darkmode?"dark-card":"card"},[i("div",{staticClass:"card-header-flex"},[i("div",{staticClass:"card-header-text"},[i("i",{class:["fas","income"==t.type?"fa-sign-in-alt":"fa-sign-out-alt"]}),t._v("\n            Edit "+t._s(t.type.charAt(0).toUpperCase()+t.type.slice(1))+"\n        ")])]),t._v(" "),i("div",{staticClass:"card-body"},[t.ready?i("div",[i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-md-3 col-form-label text-md-right",attrs:{for:"date"}},[t._v("Date")]),t._v(" "),i("div",{staticClass:"col-md-7"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.attributes.date,expression:"attributes.date"}],class:["form-control",t.invalidDate&&"is-invalid"],attrs:{type:"date",min:t.minDate},domProps:{value:t.attributes.date},on:{input:function(e){e.target.composing||t.$set(t.attributes,"date",e.target.value)}}}),t._v(" "),t.invalidDate?i("span",{staticClass:"invalid-feedback",attrs:{role:"alert"}},[i("strong",[t._v("This date is invalid")])]):t._e()])]),t._v(" "),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-md-3 col-form-label text-md-right",attrs:{for:"title"}},[t._v("Title")]),t._v(" "),i("div",{staticClass:"col-md-7"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.attributes.title,expression:"attributes.title"}],class:["form-control",t.invalidTitle&&"is-invalid"],attrs:{type:"text",autocomplete:"off",placeholder:"Your title here",list:"titleList"},domProps:{value:t.attributes.title},on:{input:function(e){e.target.composing||t.$set(t.attributes,"title",e.target.value)}}}),t._v(" "),i("datalist",{attrs:{id:"titleList"}},t._l(t.titles,(function(e,a){return i("option",{key:a},[t._v(t._s(e))])})),0),t._v(" "),t.invalidTitle?i("span",{staticClass:"invalid-feedback",attrs:{role:"alert"}},[i("strong",[t._v("This title is invalid")])]):t._e()])]),t._v(" "),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-md-3 col-form-label text-md-right",attrs:{for:"amount"}},[t._v("Amount")]),t._v(" "),i("div",{staticClass:"col-md-7"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.attributes.amount,expression:"attributes.amount"}],class:["form-control",t.invalidAmount&&"is-invalid"],attrs:{type:"number",step:"0.001",placeholder:"Your amount here"},domProps:{value:t.attributes.amount},on:{input:function(e){e.target.composing||t.$set(t.attributes,"amount",e.target.value)}}}),t._v(" "),t.invalidAmount?i("span",{staticClass:"invalid-feedback",attrs:{role:"alert"}},[i("strong",[t._v("This amount is invalid")])]):t._e()])]),t._v(" "),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-md-3 col-form-label text-md-right",attrs:{for:"price"}},[t._v("Price")]),t._v(" "),i("div",{staticClass:"col-md-4 col-sm-12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.attributes.price,expression:"attributes.price"}],class:["form-control",t.invalidPrice&&"is-invalid"],attrs:{type:"number",step:"0.01",placeholder:"Your price here"},domProps:{value:t.attributes.price},on:{input:function(e){e.target.composing||t.$set(t.attributes,"price",e.target.value)}}}),t._v(" "),t.invalidPrice?i("span",{staticClass:"invalid-feedback",attrs:{role:"alert"}},[i("strong",[t._v("This price is invalid")])]):t._e()]),t._v(" "),i("div",{staticClass:"col-md-3 col-sm-12 mt-2 mt-md-0"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.attributes.currency_id,expression:"attributes.currency_id"}],staticClass:"form-control",on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.attributes,"currency_id",e.target.multiple?i:i[0])},t.currencyChange]}},t._l(t.currencies,(function(e,a){return i("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.ISO))])})),0)])]),t._v(" "),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-md-3 col-form-label text-md-right",attrs:{for:"value"}},[t._v("Value")]),t._v(" "),i("div",{staticClass:"col-md-7"},[i("input",{staticClass:"form-control",attrs:{type:"number",disabled:""},domProps:{value:Math.round(t.attributes.price*t.attributes.amount*100)/100}})])]),t._v(" "),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v("Category")]),t._v(" "),i("div",{staticClass:"col-md-7"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.attributes.category_id,expression:"attributes.category_id"}],staticClass:"form-control",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.attributes,"category_id",e.target.multiple?i:i[0])}}},[t._l(t.categories[t.attributes.currency_id],(function(e,a){return i("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])})),t._v(" "),i("option",{attrs:{value:"null"}},[t._v("N / A")])],2)])]),t._v(" "),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v("Mean of payment")]),t._v(" "),i("div",{staticClass:"col-md-7"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.attributes.mean_id,expression:"attributes.mean_id"}],staticClass:"form-control",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.attributes,"mean_id",e.target.multiple?i:i[0])}}},[t._l(t.means[t.attributes.currency_id],(function(e,a){return i("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])})),t._v(" "),i("option",{attrs:{value:"null"}},[t._v("N / A")])],2)])]),t._v(" "),i("hr"),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-4"},[i("button",{staticClass:"big-button-primary",attrs:{disabled:t.buttonsDisabled},on:{click:t.reset}},[t._v("\n                        Reset changes\n                    ")])]),t._v(" "),i("div",{staticClass:"col-4"},[i("button",{staticClass:"big-button-success",attrs:{disabled:t.buttonsDisabled||t.invalidData},domProps:{innerHTML:t._s(t.saveButton)},on:{click:t.saveChanges}})]),t._v(" "),i("div",{staticClass:"col-4"},[i("button",{staticClass:"big-button-danger",attrs:{disabled:t.buttonsDisabled||t.invalidData},domProps:{innerHTML:t._s(t.deleteButton)},on:{click:t.destroy}})])])]):i("div",{staticClass:"d-flex justify-content-center my-2"},[t._m(0)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spinner-grow",staticStyle:{width:"3rem",height:"3rem"},attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[this._v("Loading...")])])}],!1,null,null,null);e.default=r.exports}});