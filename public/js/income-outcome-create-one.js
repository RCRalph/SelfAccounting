!function(t){var e={};function a(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(i,r,function(e){return t[e]}.bind(null,r));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a(a.s=51)}({0:function(t,e,a){"use strict";function i(t,e,a,i,r,n,s,o){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=a,u._compiled=!0),i&&(u.functional=!0),n&&(u._scopeId="data-v-"+n),s?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},u._ssrRegister=l):r&&(l=o?function(){r.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:u}}a.d(e,"a",(function(){return i}))},51:function(t,e,a){t.exports=a(52)},52:function(t,e,a){Vue.component("income-outcome-create-one-component",a(58).default);new Vue({el:"#app"})},58:function(t,e,a){"use strict";a.r(e);var i={props:{type:String},data:function(){return{darkmode:!1,ready:!1,attributes:{},currencies:[],categories:{},means:{},titles:[],saveButton:"Submit",buttonsDisabled:!1,titleChanged:!1,priceChanged:!1}},computed:{invalidDate:function(){var t=this;if(!this.attributes.mean_id||"null"==this.attributes.mean_id)return!this.attributes.date;var e=new Date(this.attributes.date).getTime(),a=this.means[this.attributes.currency_id].filter((function(e){return e.id==t.attributes.mean_id}))[0].first_entry_date;return!this.attributes.date||new Date(a).getTime()>e},invalidTitle:function(){return!this.attributes.title||this.attributes.title.length>32},invalidAmount:function(){return parseFloat(this.attributes.amount)!=this.attributes.amount},invalidPrice:function(){return parseFloat(this.attributes.price)!=this.attributes.price},minDate:function(){var t=this;return!(!this.attributes.mean_id||"null"==this.attributes.mean_id)&&this.means[this.attributes.currency_id].filter((function(e){return e.id==t.attributes.mean_id}))[0].first_entry_date},invalidData:function(){return this.invalidDate||this.invalidTitle||this.invalidAmount||this.invalidPrice}},methods:{saveChanges:function(){var t=this;this.saveButton='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>',this.buttonsDisabled=!0,axios.post("/webapi/".concat(this.type,"/store/one"),this.attributes).then((function(e){"success"==e.data.status?window.location.href="/"+t.type:(t.saveButton="Save",t.buttonsDisabled=!1)})).catch((function(){t.saveButton="Save",t.buttonsDisabled=!1}))},currencyChange:function(){this.attributes.mean_id=null,this.attributes.category_id=null}},beforeMount:function(){this.darkmode=document.getElementById("sun-moon").innerHTML.includes('<i class="fas fa-sun"></i>')},mounted:function(){var t=this;axios.get("/webapi/".concat(this.type,"/create/getData")).then((function(e){t.categories=e.data.categories,t.currencies=e.data.currencies,t.means=e.data.means,t.titles=e.data.titles;var a={};a.currency_id=e.data.lastCurrency,a.category_id=e.data.lastCategory,a.mean_id=e.data.lastMean,a.amount=1,a.price="";var i=!1;a.mean_id&&(i=t.means[a.currency_id].filter((function(t){return t.id==a.mean_id}))[0].first_entry_date);var r=new Date(i).getTime()>(new Date).getTime()?new Date(i):new Date;a.date=r.toLocaleDateString("en-ZA").split("/").join("-"),t.attributes=a,t.ready=!0}))},beforeUpdate:function(){this.darkmode=document.getElementById("sun-moon").innerHTML.includes('<i class="fas fa-sun"></i>')},updated:function(){this.$nextTick((function(){$('[data-toggle="tooltip"]').tooltip()}))}},r=a(0),n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.darkmode?"dark-card":"card"},[a("div",{staticClass:"card-header-flex"},[a("div",{staticClass:"card-header-text"},[a("i",{class:["fas","income"==t.type?"fa-sign-in-alt":"fa-sign-out-alt"]}),t._v("\n            Add single "+t._s(t.type)+"\n        ")])]),t._v(" "),a("div",{staticClass:"card-body"},[t.ready?a("div",[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label text-md-right",attrs:{for:"date"}},[t._v("Date")]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.attributes.date,expression:"attributes.date"}],class:["form-control",t.invalidDate&&"is-invalid"],attrs:{type:"date",min:t.minDate},domProps:{value:t.attributes.date},on:{input:function(e){e.target.composing||t.$set(t.attributes,"date",e.target.value)}}}),t._v(" "),t.invalidDate?a("span",{staticClass:"invalid-feedback",attrs:{role:"alert"}},[a("strong",[t._v("This date is invalid")])]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label text-md-right",attrs:{for:"title"}},[t._v("Title")]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.attributes.title,expression:"attributes.title"}],class:["form-control",t.invalidTitle&&t.titleChanged&&"is-invalid"],attrs:{type:"text",autocomplete:"off",placeholder:"Your title here",list:"titleList"},domProps:{value:t.attributes.title},on:{input:[function(e){e.target.composing||t.$set(t.attributes,"title",e.target.value)},function(e){t.titleChanged=!0}]}}),t._v(" "),a("datalist",{attrs:{id:"titleList"}},t._l(t.titles,(function(e,i){return a("option",{key:i},[t._v(t._s(e))])})),0),t._v(" "),t.invalidTitle&&t.titleChanged?a("span",{staticClass:"invalid-feedback",attrs:{role:"alert"}},[a("strong",[t._v("This title is invalid")])]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label text-md-right",attrs:{for:"amount"}},[t._v("Amount")]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.attributes.amount,expression:"attributes.amount"}],class:["form-control",t.invalidAmount&&"is-invalid"],attrs:{type:"number",step:"0.001",placeholder:"Your amount here"},domProps:{value:t.attributes.amount},on:{input:function(e){e.target.composing||t.$set(t.attributes,"amount",e.target.value)}}}),t._v(" "),t.invalidAmount?a("span",{staticClass:"invalid-feedback",attrs:{role:"alert"}},[a("strong",[t._v("This amount is invalid")])]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label text-md-right",attrs:{for:"price"}},[t._v("Price")]),t._v(" "),a("div",{staticClass:"col-md-4 col-sm-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.attributes.price,expression:"attributes.price"}],class:["form-control",t.invalidPrice&&t.priceChanged&&"is-invalid"],attrs:{type:"number",step:"0.01",placeholder:"Your price here"},domProps:{value:t.attributes.price},on:{input:[function(e){e.target.composing||t.$set(t.attributes,"price",e.target.value)},function(e){t.priceChanged=!0}]}}),t._v(" "),t.invalidPrice&&t.priceChanged?a("span",{staticClass:"invalid-feedback",attrs:{role:"alert"}},[a("strong",[t._v("This price is invalid")])]):t._e()]),t._v(" "),a("div",{staticClass:"col-md-3 col-sm-12 mt-2 mt-md-0"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.attributes.currency_id,expression:"attributes.currency_id"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.attributes,"currency_id",e.target.multiple?a:a[0])},t.currencyChange]}},t._l(t.currencies,(function(e,i){return a("option",{key:i,domProps:{value:e.id}},[t._v(t._s(e.ISO))])})),0)])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label text-md-right",attrs:{for:"value"}},[t._v("Value")]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("input",{staticClass:"form-control",attrs:{type:"number",disabled:""},domProps:{value:Math.round(t.attributes.price*t.attributes.amount*100)/100}})])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v("Category")]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.attributes.category_id,expression:"attributes.category_id"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.attributes,"category_id",e.target.multiple?a:a[0])}}},[t._l(t.categories[t.attributes.currency_id],(function(e,i){return a("option",{key:i,domProps:{value:e.id}},[t._v(t._s(e.name))])})),t._v(" "),a("option",{attrs:{value:"null"}},[t._v("N / A")])],2)])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v("Mean of payment")]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.attributes.mean_id,expression:"attributes.mean_id"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.attributes,"mean_id",e.target.multiple?a:a[0])}}},[t._l(t.means[t.attributes.currency_id],(function(e,i){return a("option",{key:i,domProps:{value:e.id}},[t._v(t._s(e.name))])})),t._v(" "),a("option",{attrs:{value:"null"}},[t._v("N / A")])],2)])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4 col-12 offset-sm-4"},[a("button",{staticClass:"big-button-primary",attrs:{disabled:t.buttonsDisabled||t.invalidData},domProps:{innerHTML:t._s(t.saveButton)},on:{click:t.saveChanges}})])])]):a("div",{staticClass:"d-flex justify-content-center my-2"},[t._m(0)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spinner-grow",staticStyle:{width:"3rem",height:"3rem"},attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[this._v("Loading...")])])}],!1,null,null,null);e.default=n.exports}});